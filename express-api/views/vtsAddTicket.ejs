<%- include('header') %>
    <main>
        <!-- Header-->
        <header class="pt-5">
            <div class="container px-4 px-lg-5 my-5">
                <div class="text-center">
                    <h1 class="display-4 fw-bolder">Finalize Request</h1>
                    <p class="lead fw-normal mb-0">submit to send request for manager approval</p>
                </div>
            </div>
        </header>
        <!-- Section-->
        <section>
            
            <div class="container mt-5">
                <div class="d-flex justify-content-between align-items-center mt-5">
                    <a href="/tickets" class="btn btn-primary">Back to All Requests</a>
                </div>
                <div class="card mt-4">
                <div class="row gx-4 gx-lg-5 justify-content-center px-5 pt-5">
                    <form action="/tickets/" method="POST">
                        <div class="row mb-4">
                          <div class="col">
                            <div class="form-outline">
                                
                                    <input type="text" class="form-control" id="requestedby" name="requestedby" placeholder="Enter requested by">
                                    <label for="requestedby">Requested By</label>
                                
                            </div>
                          </div>
                          <div class="col">
                            <div class="form-outline">
                                
                                    <input type="text" class="form-control" id="receiver" name="receiver" placeholder="Enter receiver">
                                    <label for="receiver">Receiver</label>
                               
                            </div>
                          </div>
                        </div>
                        <!-- hidden input for contents -->
                        <div class="form-outline mb-4">
                            <input type="hidden" class="form-control" id="contents" name="contents" placeholder="Enter contents">
                        </div>
                        <div class="container mt-4">
                            <label for="contents">Contents</label>
                            <table class="table table-bordered">
                              <thead>
                                <tr>
                                  <th>Item #</th>
                                  <th>Item Name</th>
                                  <th>Individual Price</th>
                                  <th>Quantity</th>
                                </tr>
                              </thead>
                              <tbody id="contentsTable" >
                              </tbody>
                            </table>
                          </div>

                        <!-- Number input -->
                        <div class="form-outline mb-4">
                            <label class="form-label" for="dept">Department</label>
                            <select name="dept" id="dept">
                                <option value="1">Department 1</option>
                                <option value="2">Department 2</option>
                                <option value="3">Department 3</option>
                                <option value="4">Department 4</option>
                            </select>
                        </div>
                      
                        <!-- Message input -->
                        <div class="form-outline mb-4">
                            <textarea class="form-control" id="notes" name="notes" rows="4"></textarea>
                            <label for="notes">Notes</label>
                        </div>
                    
                      
                        <!-- Submit button -->
                        <button type="submit" onclick="clearCart()" class="btn btn-primary btn-block mb-4">Send Request</button>
                      </form>

                    
                </div>
            </div>
            </div>
        
        </section>
        
            <!-- <section class="py-5">
                <div class="container px-4 px-lg-5">
                    <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
                        <div class="container mt-5">
                            <h2>Item Details</h2>
                            <form action="/tickets/" method="POST">
                                <div class="form-group">
                                    <input type="text" class="form-control" id="requestedby" name="requestedby" placeholder="Enter requested by">
                                    <label for="requestedby">Requested By</label>
                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control" id="receiver" name="receiver" placeholder="Enter receiver">
                                    <label for="receiver">receiver</label>
                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control" id="contents" name="contents" placeholder="Enter contents">
                                    <label for="contents">contents</label>
                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control" id="notes" name="notes" placeholder="Enter Notes">
                                    <label for="notes">Notes</label>
                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control" id="dept" name="dept" placeholder="Enter dept">
                                    <label for="dept">dept</label>
                                </div>
                                <button type="submit" class="btn btn-primary">Submit</button>
                            </form>
                        </div>
          
                    </div>
                </div>
            </section> -->
            
    </main>
        
        <!-- Footer-->
        <footer class="py-5">
            <!-- <div class="container"><p class="m-0 text-center text-white">Copyright &copy; Valley Tech Systems</p></div> -->
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script>
            function clearCart(){
                    cart = [];
                    localStorage.removeItem('shoppingCart');
            }
            window.addEventListener('load', function() {
              // Retrieve form elements by their IDs
              var contentsField = document.getElementById('contents');
              
              // Set default values for the form fields
              
              cartRaw = localStorage.getItem('shoppingCart');
              cartParsed = JSON.parse(cartRaw);
              contentsField.value = cartRaw;
            const tableBody = document.getElementById('contentsTable');
                cartParsed.forEach(obj => {
                    const row = document.createElement('tr');
                    
                    // Loop through each property in the object and create table cells
                    for (const prop in obj) {
                        if (Object.prototype.hasOwnProperty.call(obj, prop)) {
                            
                            const cell = document.createElement('td');

                            if (prop === 'itemQuantity') {
                            cell.textContent = obj[prop];
                            const anchor = document.createElement('a');
                            anchor.href = '#'; // Set your URL or function for the anchor's href
                            
                            anchor.addEventListener('click', function(event) {
                            event.preventDefault(); // Prevent the default action (e.g., following the link)
                            // Add your functionality here
                            console.log('Anchor clicked!');
                            // You can perform other actions or call functions when the anchor is clicked
                            });

                            anchor.textContent = obj[prop];
                            cell.appendChild(anchor);
                            } else {
                            cell.textContent = obj[prop];
                            }





                            row.appendChild(cell);
                        }
                    }
                    
                    // Append the row to the table body
                    tableBody.appendChild(row);
                });
                

            });
          </script>
    </body>
</html>